#%DDDML 0.1

---

# ------------------------------
aggregates:

    # --------------- aggregate ---------------
    Warehouse:
      
      id:
        name: WarehouseId
        type: string

      properties:

        Name:
          type: string
          
        Description:
          type: string

        IsInTransit:
          type: bool
          
        Locators:
          itemType: Locator
          inverseOf: Warehouse
          
        #c_location_id numeric(10,0) NOT NULL,
        #Separator # character(1) NOT NULL,
        #m_warehousesource_id numeric(10,0),
        #replenishmentclass character varying(60),

        
    # --------------- aggregate ---------------
    Locator:

      id:
        name: LocatorId
        type: string
        constraints: [numericDashAlphabetic]

      properties:

        WarehouseId:
          #type: string
          referenceType: Warehouse
          referenceName: Warehouse
          notNull: true

        ParentLocatorId:
          type: string

        LocatorType:
          type: string

        PriorityNumber:
          type: string

        IsDefault:
          type: bool

        X:
          type: string

        Y:
          type: string

        Z:
          type: string


# -------------------------------------

trees:
    
    LocatorTree:
    
      nodeContentType: Locator
      
      parentId: ParentLocatorId
      
      rootParentIdValues: [null, ""]
        
        
services:
  
    MovementService:
  
      methods:
      
        MoveInSameHouse:
      
          parameters:
          
            SourceLocatorId:
              referenceType: Locator
          
            TargetLocatorId:
              referenceType: Locator
              
            ProductId:
              type: string
          
            Amount:
              type: int
          
          return:
            type: string
            name: MovementId
            
        #authorizationEnabled: true
        #requiredRoles: [xxxx]
    
            
        